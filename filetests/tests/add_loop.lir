(define (repeated_add [count u64] [x u64]) u64
  (block (start)
    (set r (const u64 0))
    (jump (loop))
  )
  (block (loop)
    (set zero (const u64 0))
    (set f (cmp u64 gt zero count))
    (cond_jump f (body) (done))
  )
  (block (body)
    (call void (print_u64 count))
    (call void (print_u64 r))
    (set r (add u64 r x))
    (set one (const u64 1))
    (set count (sub u64 count one))
    (jump (loop))
  )
  (block (done)
    (ret r)
  )
)

(define (entry) void
  (block (start)
    (set count (const u64 10))
    (set x (const u64 20))
    (set r (call u64 (repeated_add count x)))
    (set ex (const u64 200))
    (call void (assert_eq_u64 r ex))
    (ret)
  )
)
