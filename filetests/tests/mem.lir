(global #:align 8 #:linkage preemptible testing (bytes 12 0 0 0 0 0 0 0))
(global #:align 1 str (string '';fapsdf2#hello))

(define #:linkage preemptible (puts [s : ptr]) : void)

; 65 is 'A'
(global #:align 1 my_string (bytes 65 65 65 65 65 65 65 65 65 65 0))

(define (entry) : void
  (block (start)
    (set p1 (alloca 16))
    (store i64 p1 (const i64 20))
    (store i64 (add ptr p1 (const i64 8)) (const i64 29))
    (set p3 (alloca 16))
    (set p2 (alloca 8))
    (set r1 (load i64 p1))
    (set r2 (load i64 (add ptr p1 (const i64 8))))
    (call void (assert_eq_u64 r1 (const i64 20)))
    (call void (assert_eq_u64 r2 (const i64 29)))
    (set p4 (global testing))
    (set r3 (load i64 p4))
    (call void (assert_eq_u64 r3 (const i64 12)))
    (set my_string (global my_string))
    (call void (puts my_string))
    (call void (puts my_string))
    (call void (puts my_string))
    (call void (puts my_string))
    (ret)
  )
)
