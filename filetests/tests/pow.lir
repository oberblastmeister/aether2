; (define testing : i64)
; (define testing 13423 : i64)
; (define (pow [x : i64] [n : i64]) : i64)

(define (pow [x : i64] [n : i64]) : i64
  (block (start)
    (set r (const i64 1))
    (jump (loop))
  )
  (block (loop)
    (cond_jump (ucmp i64 gt n (const i64 0)) (body) (done))
  )
  (block (body)
    (call void (print_u64 n))
    (call void (print_i64 r))
    (set r (mul i64 r x))
    (set n (sub i64 n (const i64 1)))
    (jump (loop))
  )
  (block (done)
    (ret r)
  )
)

(define (entry) : void
  (block (start)
    (set r (call i64 (pow (const i64 -1) (const i64 2))))
    (call void (assert_eq_i64 (const i64 1) r))
    (set r (call i64 (pow (const i64 -1) (const i64 3))))
    (call void (assert_eq_i64 (const i64 -1) r))
    (set r (call i64 (pow (const i64 -7) (const i64 12))))
    (call void (assert_eq_i64 (const i64 13841287201) r))
    (ret)
  )
)
